---
layout: post
title:  关于字节序
date:   2015-04-21
categories:
- coding
tags:
- 字节序
---


今天有工作涉及到字节序，抽空温习了一把，将baidu来的资料整理了放这里。


### 比特序与字节序

比特序是用来描述比特位在字节中的存放顺序。<br />
字节序是指多字节数据在计算机内存中存储或网络传输时各字节的存储顺序。<br />

数据都有所谓的“有效位（Significant Bit）”，顾名思义它表示了“数据存放有效的位置”，而字节序的分类就是依赖于有效位来进行划分的。在一个字节当中，数据的有效位的顺序已经得到了大多数硬件生产商的共识，那就是最高有效位优先（Most Significant Bit First）。例如我们用8位二进制数来表示十进制数123为01111011，其第一位的0就是最高有效位，而最后一位的1就是最低有效位。在一个字节当中，几乎当前所有的硬件都采用了这种直观的比特序。<br />

```
LSB是指 least significant bit，MSB是指 most significant bit。
LSB 0 位序是指：字节的第0位存放数据的least significant bit，即我们的数据的最低位存放在字节的第0位。
MSB 0 位序是指：字节的第0位存放数据的most significant bit，即我们的数据的最高位存放在字节的第0位。
```

但是多字节数据如何存储？不同的CPU可接受的字节序可能不同，在设计硬件和软件时数据的存放问题也需要分开考虑。<br />

### 大端字节序与小端字节序

谈到字节序，必然牵涉到两大CPU派系。那就是Motorola的PowerPC系列CPU和Intel的x86系列CPU。PowerPC系列采用big endian方式存储数据，而x86系列则采用little endian方式存储数据。

大端字节序（Big Endian）是指低地址存放最高有效字节（MSB）。<br />
小端字节序（Little Endian）则是低地址存放最低有效字节（LSB）。<br />
比如数字0x12345678在两种不同字节序CPU中的存储顺序如下所示： <br />

```
Big Endian 

  低地址                           高地址 
  -----------------------------------------> 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
  |     12     |      34    |     56      |     78    | 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 

Little Endian 

  低地址                           高地址 
  -----------------------------------------> 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
  |     78     |      56    |     34      |     12    | 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

从上图可以看出，采用big endian方式存储数据是符合我们人类的思维习惯的。<br />
大小端跟多字节类型的数据有关，比如int,short, long类型，对单字节类型byte没有影响。


### 主机字节序与网络字节序

由处理器决定的字节序就是主机字节序。<br />
在网络间传输数据按照big endian约定进行传输，为网络字节序。<br />


###参考资料

比特序：[http://en.wikipedia.org/wiki/Bit_numbering](http://en.wikipedia.org/wiki/Bit_numbering)
字节序：[http://en.wikipedia.org/wiki/Endianess](http://en.wikipedia.org/wiki/Endianess)


